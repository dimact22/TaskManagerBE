# Резервне копіювання FastAPI у Production

# Інструкції з резервного копіювання

### 1. Стратегія резервного копіювання
- Використовуйте повні резервні копії один раз на тиждень, інкрементальні — щодня.

### 2. Типи резервних копій
- Повні копії — зберігаються всі дані.
- Інкрементальні копії — зберігаються тільки зміни від останньої копії.
  
### 3. Частота створення резервних копій
- Щоденні інкрементальні копії.
- Щотижневі повні копії.

### 4. Зберігання та ротація копій
- Зберігайте резервні копії в хмарі або на окремих серверах.
- Використовуйте стратегію ротації: зберігаються останні 30 копій.

### 5. Процедура резервного копіювання
#### 5.1 Бази даних
- Використовуйте інструменти резервного копіювання для бази даних (наприклад, `mongodump` для MongoDB).
- Виконуйте резервне копіювання перед кожним оновленням.

#### 5.2 Файли конфігурацій
- Створюйте копії файлів конфігурацій системи і налаштувань серверів.
  
#### 5.3 Користувацькі дані
- Резервуйте користувацькі дані та файли, які можуть бути важливими для відновлення.

#### 5.4 Логи системи
- Резервуйте логи, особливо перед великими оновленнями або змінами.

### 6. Перевірка цілісності резервних копій
- Періодично перевіряйте резервні копії на наявність помилок і цілісності даних.
- Використовуйте перевірки SHA256 для валідації копій.

### 7. Автоматизація процесу резервного копіювання
- Створіть скрипти для автоматичного резервного копіювання за допомогою `cron` або інших інструментів.
- Використовуйте сторонні інструменти для резервного копіювання, якщо необхідно.

## Резервне копіювання бази даних MongoDB

1. Для резервного копіювання MongoDB можна використовувати стандартну утиліту `mongodump`:
    ```bash
    mongodump --uri="mongodb://your-db-url" --out=/path/to/backup/directory
    ```

2. Щоб створювати резервні копії регулярно, налаштуйте cron job:
    - Відкрийте crontab:
        ```bash
        crontab -e
        ```
    - Додайте запис для регулярного резервного копіювання:
        ```bash
        0 2 * * * mongodump --uri="mongodb://your-db-url" --out=/path/to/backup/directory
        ```

## Резервне копіювання коду

1. Регулярно створюйте резервні копії коду за допомогою git:
    ```bash
    git clone https://github.com/dimact22/TaskManagerBE.git /path/to/backup/directory
    ```

2. Переконайтесь, що всі зміни в коді зберігаються в репозиторії для подальшого відновлення.

## Відновлення з резервної копії

1. Для відновлення бази даних використовуйте команду `mongorestore`:
    ```bash
    mongorestore --uri="mongodb://your-db-url" /path/to/backup/directory
    ```

2. Відновіть код з резервної копії:
    ```bash
    cp -r /path/to/backup/directory/* /path/to/your/project/
    ```

3. Перезапустіть додаток:
    ```bash
    sudo systemctl restart gunicorn
    sudo systemctl restart nginx
    ```
